<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2013 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
/**
 * @var Mage_Page_Block_Html_Header $this
 */
?>
<div class="header-container header2">
    <div class="header-top-container">
        <div class="header-top header container_12">
            <div class="grid_full">
                <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('block-header-top1')->toHtml() ?>
                <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('block-header-top2')->toHtml() ?>
            </div>
        </div>
    </div>
    <div class="header-primary-container">
        <div class="header-primary header container_12">
            <div class="grid_full">
                <div class="header-main v-grid-container">
                    <div class="grid_4 v-grid">
                        <div class="logo">
                            <a href='<?php echo $this->getUrl(''); ?>' title='<?php echo $this->getLogoAlt(); ?>'>
                                <strong><?php echo $this->getLogoAlt(); ?></strong>
                                <img src='<?php echo $this->getLogoSrc(); ?>' alt='<?php echo $this->getLogoAlt(); ?>' />
                            </a>
                        </div>                        
                    </div>                    
                    <div class="grid_8 v-grid">
                        <div class="top-links links-separators">
                            <?php echo $this->getChildHtml('topLinks'); ?>
                        </div>
                        <?php echo $this->getLayout()->createBlock('directory/currency')->setTemplate('directory/currency.phtml')->toHtml(); ?>
                        <?php echo $this->getChildHtml('store_language'); ?>            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="navmain-container">
        <div class="container_12">
            <div class="grid_full nav">
                <div class="grid_9 mobile-grid-half no-left-margin">
                    <?php echo $this->getChildHtml('topContainer'); ?>
                    <?php echo $this->getChildHtml('topMenu') ?>
                </div>
                <div class="grid_3 mobile-grid-half no-right-margin">
                    <?php echo $this->getChildHtml('wishlist.header') ?>
                    <?php echo $this->getChildHtml('cart_sidebar') ?>
                    <?php echo $this->getChildHtml('topSearch'); ?>
                </div>
            </div>
        </div>
    </div>
</div>
<?php if(Mage::getStoreConfig('mygeneral/header/sticky_header') && Mage::helper("ExtraConfig")->is_mobile() == false) { ?>
<script type="text/javascript">
//<![CDATA[
var myHeader = j$('.navmain-container');
myHeader.data( 'position', myHeader.position() );
j$(window).scroll(function(){
    var hPos = myHeader.data('position'), scroll = getScroll();
    if ( hPos.top < scroll.top ){
        myHeader.addClass('fixed');
    }
    else {
        myHeader.removeClass('fixed');
    }
});

function getScroll () {
    var b = document.body;
    var e = document.documentElement;
    return {
        left: parseFloat( window.pageXOffset || b.scrollLeft || e.scrollLeft ),
        top: parseFloat( window.pageYOffset || b.scrollTop || e.scrollTop )
    };
}
//]]>
</script>
<?php } ?>